package <missing>;

public class GlobalMembers
{
	//???????????? 

	public static int n; //???????
	public static char[][][] a =
	{
		{
			{0, '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'},
			{'\0', '\0'}
		}
	}; //?????????

	public static void cz(int k)
	{
		 if (k != 1)
		 {
			for (int j = 1;j <= n;j++)
			{
				for (int k = 1;k <= n;k++)
				{
					if (a[j][k][0] == 0 || a[j][k][0] == 2) //????????
					{
					a[j][k][1] = a[j][k][0];
					}
					else
					{
						if (a[j + 1][k][0] == 2 || a[j - 1][k][0] == 2 || a[j][k + 1][0] == 2 || a[j][k - 1][0] == 2) //????????????
						{
						a[j][k][1] = 2;
						}
						else
						{
						a[j][k][1] = 1;
						}
					}
				}
			}
			for (int j = 1;j <= n;j++)
			{
				for (int k = 1;k <= n;k++)
				{
				a[j][k][0] = a[j][k][1];
				}
			}
			cz(k - 1);
		 }
	}


	public static int Main()
	{
		int m; //????
		int ans = 0; //????
		n = Integer.parseInt(ConsoleInput.readToWhiteSpace(true));
		for (int i = 1;i <= n;i++) //?????????????????0???2???1
		{
			for (int j = 1;j <= n;j++)
			{
				a[i][j][0] = ConsoleInput.readToWhiteSpace(true).charAt(0);
				if (a[i][j][0] == '#')
				{
				a[i][j][0] = 0;
				}
				if (a[i][j][0] == '.')
				{
				a[i][j][0] = 1;
				}
				if (a[i][j][0] == '@')
				{
				a[i][j][0] = 2;
				}
			}
		}
		m = Integer.parseInt(ConsoleInput.readToWhiteSpace(true));
		cz(m);
		for (int i = 1;i <= n;i++) //??????????
		{
			for (int j = 1;j <= n;j++)
			{
				if (a[i][j][0] == 2)
				{
				ans++;
				}
			}
		}
		System.out.print(ans);
		return 0;
	}

}

