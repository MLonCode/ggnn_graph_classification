package <missing>;

public class GlobalMembers
{
	/********************************************
	 *@file   5.cpp                             *
	 *@author ??                              *
	 *@date   2013-11-3                         *
	 *@description                              *
	 *??????7?????                   *
	 ********************************************
	 */
	public static int[][][] room = new int[110][110][110]; // ????????????????????
	public static int Main()
	{
		int n;
		int m;
		int i;
		int j;
		int k;
		int count = 0;
		char[][] ch = new char[110][110];
		n = Integer.parseInt(ConsoleInput.readToWhiteSpace(true));

		//?????????????
		for (i = 1; i <= n; i++)
		{
			for (j = 1; j <= n; j++)
			{
				ch[i][j] = ConsoleInput.readToWhiteSpace(true).charAt(0);
				if (ch[i][j] == '.')
				{
					room[i][j][1] = 1;
				}
				if (ch[i][j] == '#')
				{
					room[i][j][1] = 0;
				}
				if (ch[i][j] == '@')
				{
					room[i][j][1] = 2;
				}
			}
		}
		m = Integer.parseInt(ConsoleInput.readToWhiteSpace(true));
		for (k = 1; k < m; k++) // ??m-1?????1????????????????????
		{
			for (i = 1; i <= n; i++)
			{
				for (j = 1; j <= n; j++)
				{
					if (room[i][j][k] >= 2)
					{
						room[i][j][k] = 2; // ???????????????2?100??????????????
										   // ?cin.get?????????????????????????k+1?????

						//????????????????????????????????
						room[i + 1][j][k + 1] = 2 * room[i + 1][j][k];
						room[i][j + 1][k + 1] = 2 * room[i][j + 1][k];
						room[i - 1][j][k + 1] = 2 * room[i - 1][j][k];
						room[i][j - 1][k + 1] = 2 * room[i][j - 1][k];
						room[i][j][k + 1] = 2; // ??????????
					}
					//????????????
					if (room[i][j][k] == 1 && room[i][j][k + 1] == 0)
					{
						room[i][j][k + 1] = 1;
					}
				}
			}
		}

		//?????????????
		for (i = 1; i <= n; i++)
		{
			for (j = 1; j <= n; j++)
			{
				if (room[i][j][m] > 1)
				{
					count++;
				}
			}
		}
		System.out.print(count);
		return 0;
	}

	// ??????????xx?????????????????debug????????????????????????
}

